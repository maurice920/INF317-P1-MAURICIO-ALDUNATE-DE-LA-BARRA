// SOLUCION EJERCICIO - 11

#include <stdio.h>
#include <mpi.h>

void main(int argc, char **argv)
{
	int i;
	int maximo = 10;
	int vector1[maximo], vector2[maximo], vector3[maximo], procesador;
	
	MPI_Init(&argc, &argv);
	MPI_Comm_rank(MPI_COMM_WORLD, &procesador);
	
	//procesador 0 - llenamos los vectores
	if(procesador == 0){
		for(i = 0; i < maximo; i++){
			vector1[i] = i*2+1;
			vector2[i] = i*2;
		}
		// imprimir vectores
		printf("Procesador 0: Vector 1\n");
		for(i = 0; i < maximo; i++){
			printf("%d ",vector1[i]);
				
		}
		printf("\n");
		printf("Procesador 0: Vector 2\n");
		for(i = 0; i < maximo; i++){
			printf("%d ",vector2[i]);
				
		}
		printf("\n");
		// Enviamos los vectores tanto al procesador 1 y 2
		MPI_Send(vector1,maximo,MPI_INT,1,0,MPI_COMM_WORLD);
		MPI_Send(vector2,maximo,MPI_INT,1,0,MPI_COMM_WORLD);
		
		MPI_Send(vector1,maximo,MPI_INT,2,0,MPI_COMM_WORLD);
		MPI_Send(vector2,maximo,MPI_INT,2,0,MPI_COMM_WORLD);
		
	}
	// procesador 1 - sumamos posiciones IMPARES
	if(procesador ==1){
		MPI_Recv(vector1,maximo,MPI_INT,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);
		MPI_Recv(vector2,maximo,MPI_INT,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);
		
		printf("Procesador 1: Suma Posiciones Impares\n");
		for(i=0;i<maximo;i++){
			if(i%2!=0){
				vector3[i] = vector1[i] + vector2[i];
				printf("%d ",vector3[i]);
				printf("\n");
			}
		}
		
	}
	if(procesador == 2){
		MPI_Recv(vector1,maximo,MPI_INT,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);
		MPI_Recv(vector2,maximo,MPI_INT,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);
		
		printf("Procesador 2: Suma Posiciones Pares\n");
		for(i=0;i<maximo;i++){
			if(i%2==0){
				vector3[i] = vector1[i] + vector2[i];
				printf("%d ",vector3[i]);
				printf("\n");
			}
		}
	}
	MPI_Finalize();
}
